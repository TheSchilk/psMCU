# Fully write and fully read each RAM page
@include StdLib.psASM

MAIN: 
# Set Ram Page to 0
LITA 0
SVA SYS2
# Start Filling
JMP FILL

# Fill the current page with consecutive numbers
FILL: 
HALT
LITA 0
CPY
LOOP1: 
SVDR
ADDLA 1
CPY
IFSM SYS1,S1_CARRY # Check if we are done
    JMP FULL # We are done
JMP LOOP1

# Finished Filling page, read it out:
FULL: 
HALT
LITA 0
LITB 0
LOOP2: LDDR
ADDLB 1
IFSM SYS1,S1_CARRY
    JMP PAGE
JMP LOOP2

# Go to next page
PAGE: HALT
LDA SYS2
ADDLA 1 
ANDL 0x0F
SVA SYS2
JMP FILL
