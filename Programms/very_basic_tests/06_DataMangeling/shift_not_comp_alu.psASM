@include StdLib.psASM

# Enable Interrupts:
MAIN: LITA 0x1
SVA SYS3
JMP TEST1

INTERRUPT: LITA 1
SVA SCRT1
LITA 0
LITB 0
RTRNI

# Test 1: SHFTLL and Invert
TEST1: LITA 0
SVA SCRT1
LITB 0
LOOP1: SHFTLL 1
NOTA
IFSM SCRT1, 0 
    JMP TEST2
JMP LOOP1

# Test 2: SHFTRL
TEST2:LITA 0
SVA SCRT1
LITA 0x80
LOOP2: SHFTRL 1
SHFTLL 1
SHFTRL 2
SHFTLL 2
SHFTRL 4
SHFTLL 4
IFSM SCRT1, 0
    JMP TEST3
JMP LOOP2

# Test 3: SHFTR and SHFTL
TEST3: LITA 0
SVA SCRT1
LOOP3: LITA 1
LITB 1
SHFTL
SHFTR
LITB 2
SHFTL
SHFTR 
LITB 4
SHFTL
SHFTR
IFSM SCRT1, 0
    JMP TEST4
JMP LOOP3

# Test 4: SHIFTIN
TEST4: LITA 0
SVA SCRT1
LOOP4: LITA 1
LITB 1
SVB 0x104
SHFTLL 6
LITB 0
SVB 0x104
SHFTRL 6
IFSM SCRT1, 0
    JMP TEST5
JMP LOOP4

# Test 5: ADD ADDL and SUB
TEST5: LITA 0
SVA SCRT1
LOOP5: LITB 1
ADD
ADD
ADD
ADD
ADD
ADD
ADD
ADD
SUB
SUB
SUB
SUB
SUB
SUB
SUB
ADDLA 1
IFSM SCRT1, 0
    JMP TEST6
JMP LOOP5

# Test 6:  COMPB
TEST6: LITA 0
SVA SCRT1
LITB 1
LOOP6: ADD
COMPB
ADD
COMPB
ADDLA 1
CPY
IFSM SCRT1, 0
    JMP TEST1
JMP LOOP6
